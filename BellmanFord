//                               Bismillahir Rahmanir Rahim
#include<bits/stdc++.h>
using namespace std;
int main()
{
    int tt;
    cin>>tt;
    for(int tst=1; tst<=tt; tst++){
        cout<<"Scenario #"<<tst<<"\n";
        int n, m, wt;
        cin>>n;
        map<string, int>mp;
        string s, ss;
        for(int i=1; i<=n; i++){cin>>s; mp[s]=i;}
        cin>>m;
        vector<int>v[n+1], w[n+1];
        while(m--){
            cin>>s>>ss>>wt;
            v[mp[s]].push_back(mp[ss]);
            w[mp[s]].push_back(wt);
        }
        set<int>nodes[1010];
        nodes[0].insert(1);
        int dis[n+1];
        for(int i=0; i<=n; i++)dis[i]=99999999;
        int ans[1010];
        dis[1]=0;
        int q;
        cin>>q;
        for(int i=0; i<=100; i++){
            for(auto it=nodes[i].rbegin(); it!=nodes[i].rend(); it++){
                int u=*it;
                //cout<<u<<" ";
                for(int k=0; k<v[u].size(); k++){dis[v[u][k]]=min(dis[v[u][k]], dis[u]+w[u][k]); nodes[i+1].insert(v[u][k]);}
            }
            ans[i]=dis[n];
            //cout<<"::"<<ans[i]<<"\n";
        }
        while(q--){
            cin>>m;
            m=min(m, 100);
            if(ans[m]==99999999)cout<<"No satisfactory flights\n";
            else cout<<"Total cost of flight(s) is $"<<ans[m]<<"\n";
        }
        if(tst!=tt)cout<<"\n";
    }
}
